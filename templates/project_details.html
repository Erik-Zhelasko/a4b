<!DOCTYPE html>
<html>
<head>
    <title>Project Details</title>
</head>
<body>

<h2>Project: {{ project.pname }}</h2>
<p>Department: <strong>{{ project.dname }}</strong></p>

<p><a href="/projects">Back to Projects Overview</a></p>

<table border="1" cellpadding="6">
    <tr>
        <th>Employee</th>
        <th>Hours Assigned</th>
        {% if session.get("role") == "admin" %}
        <th>Update Hours</th>
        {% endif %}
    </tr>

    {% for e in employees %}
    <tr>
        <td>{{ e.full_name }}</td>
        <td>{{ e.hours }}</td>

        {% if session.get("role") == "admin" %}
        <td>
            <form method="post" style="display:flex; gap:6px; align-items:center;">
                <input type="hidden" name="essn" value="{{ e.ssn }}">
                <input type="number" name="hours" min="0" step="0.1" value="{{ e.hours }}" required>
                <button type="submit">Save</button>
            </form>
        </td>
        {% endif %}
    </tr>
    {% endfor %}
</table>

<div style="margin-top: 20px;">
    <p>You are logged in as: <strong>{{ session.get('role') }}</strong></p>

    {% if session.get("role") == "admin" %}
        <p>Admin Mode: You may edit project assignments.</p>
    {% else %}
        <p>Viewer Mode: Read-only access (you cannot modify project details).</p>
    {% endif %}
</div>

</body>
</html>
